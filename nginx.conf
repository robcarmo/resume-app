
# Nginx config for serving a single-page React app

server {
  # Cloud Run injects the PORT environment variable.
  listen 8080;

  # Serve files from the 'dist' directory, which is where Vite places the build output.
  root /usr/share/nginx/html;
  index index.html;

  location / {
    # This is the key for SPAs: if a file isn't found, fall back to index.html.
    # This allows React Router (if you were using it) to handle the routing.
    try_files $uri /index.html;
  }

  # Add cache headers for static assets to improve performance
  location ~* \.(?:css|js|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public, max-age=31536000, immutable";
  }
}
